<!doctype html>
<html>

<head>
  <title>v-grid Code Examples - Polymer Integration</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="../demo.css">

  <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="common.html">

  <script src="https://github.jspm.io/jmcriffey/bower-traceur-runtime@0.0.90/traceur-runtime.js"></script>
  <script src="https://jspm.io/system@0.16.js"></script>
  <script src="https://code.angularjs.org/2.0.0-alpha.28/angular2.dev.js"></script>

  <!--<script src="../bower_components/systemjs/dist/system.src.js"></script>
  <script src="../node_modules/angular2/angular2.js"></script>
  <script src="../bower_components/traceur-runtime/traceur-runtime.js"></script>
  <script src="../bower_components/systemjs/dist/system.src.js"></script>
  <script src="../bower_components/angular/angular.min.js"></script>-->

  <style type="text/css">
    div[demo] {
      display: none;
    }
  </style>
</head>

<body>
  <section>
    <h1><a href="./">v-grid</a>
      <span>Angular 2 Integration</span>
    </h1>
    <table-of-contents select="h3" class="toc"></table-of-contents>
  </section>



  <section>
    <h3 id="headers">Angular2 Integration</h3>
    <p>This example demonstrates binding pre-defined static data to v-grid light DOM table element.</p>
    <code-example>
      <div demo>
        <v-grid #grid (select)="onSelect()">
          <table>
            <colgroup>
              <col header-text="Gender" name="user.gender">
              <col name="user.picture.thumbnail">
              <col header-text="First name" name="user.name.first">
              <col header-text="Last name" name="user.name.last">
              <col header-text="Email" name="user.email">
            </colgroup>
          </table>
        </v-grid>

        <img *ng-if="selected" class="user-image" src="{{selected.user.picture.large}}">

        <div style="display: none">
          <select maxlength=5 type="select" (change)="grid.data.clearCache()">
            <option value=''></option>
            <option value='male'>Men only</option>
            <option value='female'>Women only</option>
          </select>
        </div>
      </div>

      <code>
        var ag = document.createElement("angular-grid");
        demo.parentElement.appendChild(ag);
        System.import('angular-grid');

        /*
        // code
        // Component file: angular-grid.ts
        import {Inject, bootstrap, Component, View, NgIf} from 'angular2/angular2';
        import {Http, httpInjectables} from 'angular2/http';

        @Component({
          selector: 'angular-grid',
          appInjector: [httpInjectables]
        })
        @View({
          templateUrl: 'angular-grid.html',
          directives: [NgIf]
        })
        export class AngularGrid {
          selected: Object;
          grid = document.querySelector("angular-grid v-grid");
          gender = document.querySelector("angular-grid select");

          constructor(@Inject(Http) http: Http) {
            // Set a datasource for the v-grid
            this.grid.data.source = req =>
              http.get(this.getUrl(this.gender.value, Math.max(req.count, 1)))
                .map(res => res.json().results)
                .subscribe(results => req.success(results, this.gender.value ? 50 : 100));

            // Set a renderer for the picture column
            this.grid.columns[1].renderer = cell =>
              cell.element.innerHTML = "<img style='width: 30px' src='" + cell.data + "' />";

            // Add a new header row with the gender select in it
            this.grid.then(() => {
              this.grid.header.addRow(1, [this.gender]);
              this.grid.header.getCell(1, 1).colspan = 4;
            });
          }

          getUrl(gender: string, results: number) : string {
            return 'http://api.randomuser.me?nat=us&gender=' + gender + '&results=' + results;
          }

          onSelect() {
            this.selected = undefined;
            const selectedIndex = this.grid.selection.selected()[0];
            this.grid.data.getItem(selectedIndex, (data) => this.selected = data);
          }
        }

        bootstrap(AngularGrid);
        // end-code
        */
      </code>

    </code-example>
  </section>

</body>
</html>
